{"ast":null,"code":"var _jsxFileName = \"D:\\\\dergachev456\\\\training\\\\projects\\\\nodeJS_mysql_intro\\\\client\\\\src\\\\components\\\\SingleProduct.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nexport default class SingleProduct extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      product: null\n    };\n\n    this.addProduct = () => {\n      const newProduct = {\n        id: this.state.product[0].id + Math.random(),\n        name: \"\".concat(this.state.product[0].name, \" \").concat(this.state.product[0].model_name),\n        price: this.state.product[0].price,\n        path: this.state.product[0].path,\n        count: 1\n      };\n      let cart = JSON.parse(localStorage.getItem('cart'));\n      console.log(cart);\n\n      if (cart === null) {\n        console.log('она была налом');\n        localStorage.setItem('cart', JSON.stringify([]));\n        cart = JSON.parse(localStorage.getItem('cart'));\n        cart.push(newProduct);\n        localStorage.setItem('cart', JSON.stringify(cart));\n      }\n\n      cart.forEach(product => {\n        if (cart.indexOf(product) !== -1) {\n          console.log('должна сработать инкрементация');\n          ++product.count;\n        } else {\n          cart.push(newProduct);\n          localStorage.setItem('cart', JSON.stringify(cart));\n        }\n      }); // cart.push(newProduct);\n      // localStorage.setItem('cart', JSON.stringify(cart));\n    };\n  }\n\n  componentDidMount() {\n    const id = this.props.match.params.id;\n    fetch(\"http://localhost:8080/product/\".concat(id)).then(responce => responce.json()).then(data => this.setState({\n      product: data\n    }));\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"single\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, this.state.product && React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"single__img-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: \"/images/\".concat(this.state.product[0].path),\n      className: \"single__img\",\n      alt: this.state.product[0].name,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"single__info-container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"single__name\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, this.state.product[0].name, \"  \", this.state.product[0].model_name), this.state.product[0].availability ? React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, \"available\") : React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, \"not available\"), React.createElement(\"h2\", {\n      className: \"single__price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, this.state.product[0].price, \" \\u20B4\"), this.state.product[0].availability === 0 ? React.createElement(\"button\", {\n      className: \"m_button single__buy single__cant-buy \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, \"Add to cart\") : React.createElement(\"button\", {\n      onClick: this.addProduct,\n      className: \"m_button single__buy\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, \"Add to cart\"), React.createElement(Link, {\n      className: \"single__back m__back\",\n      to: \"/\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"\\u2190 Back\"))));\n  }\n\n}","map":{"version":3,"sources":["D:/dergachev456/training/projects/nodeJS_mysql_intro/client/src/components/SingleProduct.js"],"names":["React","Component","Link","SingleProduct","state","product","addProduct","newProduct","id","Math","random","name","model_name","price","path","count","cart","JSON","parse","localStorage","getItem","console","log","setItem","stringify","push","forEach","indexOf","componentDidMount","props","match","params","fetch","then","responce","json","data","setState","render","availability"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nexport default class SingleProduct extends Component {\r\n    state = {\r\n        product: null,\r\n    }\r\n    componentDidMount() {\r\n        const id = this.props.match.params.id;\r\n        fetch(`http://localhost:8080/product/${id}`)\r\n            .then(responce => responce.json())\r\n            .then(data => this.setState({ product: data }))\r\n    }\r\n    addProduct = () => {\r\n        const newProduct = {\r\n            id: this.state.product[0].id + Math.random(),\r\n            name: `${this.state.product[0].name} ${this.state.product[0].model_name}`,\r\n            price: this.state.product[0].price,\r\n            path: this.state.product[0].path,\r\n            count: 1\r\n        }\r\n        let cart = JSON.parse(localStorage.getItem('cart'));\r\n        console.log(cart);\r\n        if (cart === null) {\r\n            console.log('она была налом');\r\n            \r\n            localStorage.setItem('cart', JSON.stringify([]));\r\n            cart = JSON.parse(localStorage.getItem('cart'));\r\n            cart.push(newProduct);\r\n            localStorage.setItem('cart', JSON.stringify(cart));\r\n        }\r\n\r\n\r\n        cart.forEach(product => {\r\n            if (cart.indexOf(product) !== -1) {\r\n                console.log('должна сработать инкрементация');\r\n                \r\n                ++product.count;\r\n\r\n            } else {\r\n                cart.push(newProduct);\r\n                \r\n                localStorage.setItem('cart', JSON.stringify(cart));\r\n            }\r\n        });\r\n        // cart.push(newProduct);\r\n        // localStorage.setItem('cart', JSON.stringify(cart));\r\n    }\r\n    render() {\r\n        return (\r\n            <div className=\"single\">\r\n                {\r\n                    this.state.product && (\r\n                        <React.Fragment>\r\n                            <div className=\"single__img-container\">\r\n                                <img src={`/images/${this.state.product[0].path}`} className=\"single__img\" alt={this.state.product[0].name} />\r\n                            </div>\r\n                            <div className=\"single__info-container\">\r\n                                <h2 className=\"single__name\">{this.state.product[0].name}  {this.state.product[0].model_name}</h2>\r\n                                {\r\n                                    this.state.product[0].availability ? <h2>available</h2> : <h2>not available</h2>\r\n                                }\r\n                                <h2 className=\"single__price\">{this.state.product[0].price} &#8372;</h2>\r\n                                {\r\n                                    this.state.product[0].availability === 0 ? (<button className=\"m_button single__buy single__cant-buy \">Add to cart</button>) :\r\n                                        (<button onClick={this.addProduct} className=\"m_button single__buy\">Add to cart</button>)\r\n                                }\r\n                                <Link className=\"single__back m__back\" to=\"/\">&#8592; Back</Link>\r\n                            </div>\r\n                        </React.Fragment>\r\n                    )\r\n                }\r\n            </div>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}