{"ast":null,"code":"var _jsxFileName = \"D:\\\\dergachev456\\\\training\\\\projects\\\\nodeJS_mysql_intro\\\\client\\\\src\\\\components\\\\Login.js\";\nimport React, { Component } from 'react';\nexport default class Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      email: '',\n      password: '',\n      data: null,\n      isError: false,\n      isLogedIn: true,\n      user_name: ''\n    };\n\n    this.handleEmail = event => {\n      this.setState({\n        email: event.target.value\n      });\n    };\n\n    this.handlePassword = event => {\n      this.setState({\n        password: event.target.value\n      });\n    };\n\n    this.sendData = () => {\n      fetch('http://localhost:8080/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          user: {\n            email: this.state.email,\n            password: this.state.password\n          }\n        })\n      }).then(responce => responce.json()).then(data => {\n        localStorage.setItem('token', data.token);\n        localStorage.setItem('user_data', JSON.stringify(data.user));\n        this.props.history.push('/');\n      }).catch(error => {\n        this.setState({\n          isError: true\n        });\n      });\n    };\n\n    this.logout = () => {\n      localStorage.clear();\n      this.setState({\n        isLogedIn: true\n      });\n    };\n  }\n\n  componentDidMount() {\n    if (localStorage.getItem('token') !== null) {\n      this.setState({\n        isLogedIn: false\n      });\n    }\n\n    let user_data = JSON.parse(localStorage.getItem('user_data'));\n\n    if (user_data !== null) {\n      this.setState({\n        user_name: user_data.name\n      });\n    }\n  }\n\n  render() {\n    console.log(this.state.user_name);\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, this.state.isLogedIn && React.createElement(\"div\", {\n      className: \"login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"login__container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"login__title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, \"Login\"), React.createElement(\"span\", {\n      className: \"login__label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, \"Your email\"), React.createElement(\"input\", {\n      onChange: this.handleEmail,\n      type: \"text\",\n      className: \"login__input\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"login__label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"Password\"), React.createElement(\"input\", {\n      onChange: this.handlePassword,\n      type: \"text\",\n      className: \"login__input\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.sendData,\n      className: \"login__button m_button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"Continue\")), this.state.isError && React.createElement(\"h2\", {\n      className: \"login__error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, \"Incorrect data\")), !this.state.isLogedIn && React.createElement(\"div\", {\n      className: \"logout__container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"logout__title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Welcome, \", this.state.user_name), React.createElement(\"button\", {\n      onClick: this.logout,\n      className: \"logout__button m_button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \"Logout\")));\n  }\n\n}","map":{"version":3,"sources":["D:/dergachev456/training/projects/nodeJS_mysql_intro/client/src/components/Login.js"],"names":["React","Component","Login","state","email","password","data","isError","isLogedIn","user_name","handleEmail","event","setState","target","value","handlePassword","sendData","fetch","method","headers","body","JSON","stringify","user","then","responce","json","localStorage","setItem","token","props","history","push","catch","error","logout","clear","componentDidMount","getItem","user_data","parse","name","render","console","log"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\n\r\nexport default class Login extends Component {\r\n    state = {\r\n        email: '',\r\n        password: '',\r\n        data: null,\r\n        isError: false,\r\n        isLogedIn: true,\r\n        user_name: ''\r\n    }\r\n    handleEmail = (event) => {\r\n        this.setState({ email: event.target.value });\r\n    }\r\n    handlePassword = (event) => {\r\n        this.setState({ password: event.target.value });\r\n    }\r\n    componentDidMount() {\r\n        if (localStorage.getItem('token') !== null) {\r\n            this.setState({ isLogedIn: false })\r\n        }\r\n        let user_data = JSON.parse(localStorage.getItem('user_data'));\r\n        if (user_data !== null) {\r\n            this.setState({ user_name: user_data.name })\r\n        }\r\n    }\r\n    sendData = () => {\r\n        fetch('http://localhost:8080/login', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                user: {\r\n                    email: this.state.email,\r\n                    password: this.state.password\r\n                }\r\n            })\r\n        })\r\n            .then(responce => responce.json())\r\n            .then(data => {\r\n                localStorage.setItem('token', data.token);\r\n                localStorage.setItem('user_data', JSON.stringify(data.user));\r\n                this.props.history.push('/');\r\n            })\r\n            .catch(error => {\r\n                this.setState({ isError: true });\r\n            })\r\n    }\r\n    logout = () => {\r\n        localStorage.clear()\r\n        this.setState({ isLogedIn: true });\r\n    }\r\n    render() {\r\n        console.log(this.state.user_name);\r\n        \r\n        return (\r\n            <React.Fragment>\r\n                {\r\n                    this.state.isLogedIn && (\r\n                        <div className=\"login\">\r\n                            <div className=\"login__container\">\r\n                                <h2 className=\"login__title\">Login</h2>\r\n                                <span className=\"login__label\">Your email</span>\r\n                                <input onChange={this.handleEmail} type=\"text\" className=\"login__input\" />\r\n                                <span className=\"login__label\">Password</span>\r\n                                <input onChange={this.handlePassword} type=\"text\" className=\"login__input\" />\r\n                                <button onClick={this.sendData} className=\"login__button m_button\">Continue</button>\r\n                            </div>\r\n                            {\r\n                                this.state.isError && <h2 className=\"login__error\">Incorrect data</h2>\r\n                            }\r\n                        </div>\r\n                    )\r\n                }\r\n                {\r\n                    !this.state.isLogedIn && (\r\n                        <div className=\"logout__container\">\r\n                            <h2 className=\"logout__title\">Welcome, {this.state.user_name}</h2>\r\n                            <button onClick={this.logout} className=\"logout__button m_button\">Logout</button>\r\n                        </div>\r\n                    )\r\n                }\r\n            </React.Fragment>\r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}